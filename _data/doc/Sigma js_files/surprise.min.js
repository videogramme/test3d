!function(){"use strict";function a(){m=0,n=0,d=new sigma({renderer:{container:document.getElementById("konami-container"),type:"canvas"},settings:{autoRescale:!1,mouseEnabled:!1,touchEnabled:!1,nodesPowRatio:1,edgesPowRatio:1,minEdgeSize:4,maxEdgeSize:5,defaultEdgeColor:"#bd413a",defaultNodeColor:"#fae3b4",edgeColor:"default"}}),f=$("#konami-container canvas.sigma-mouse"),g=$("#disc"),h=$("#ground"),e=d.cameras[0],d.graph.read({nodes:[{id:++m+"",size:r,x:0,y:-80,dX:0,dY:0,type:"goo"},{id:++m+"",size:r,x:10,y:-100,dX:0,dY:0,type:"goo"},{id:++m+"",size:r,x:20,y:-80,dX:0,dY:0,type:"goo"}],edges:[{id:++n+"",source:"1",target:"2",size:2},{id:++n+"",source:"1",target:"3",size:2},{id:++n+"",source:"2",target:"3",size:2}]}),c(),b()}function b(){d.graph.computePhysics(),d.refresh();var a,c,l=f.width(),m=f.height(),n=1/0,q=-1/0,r=1/0,s=-1/0,t=100;(a=d.graph.nodes()).length?a.forEach(function(a){n=Math.min(a.x,n),q=Math.max(a.x,q),r=Math.min(a.y,r),s=Math.max(a.y,s)}):(n=0,q=0,r=0,s=0),q+=t,n-=t,s+=t,r-=t,c=Math.min(l/Math.max(q-n,1),m/Math.max(s-r,1)),e.goTo({x:(n+q)/2,y:(r+s)/2,ratio:1/c}),h.css("top",Math.max(m/2-Math.min((r+s)/2*c,m),0)),g.css({width:2*o*c,height:2*o*c,top:k-o*c,left:j-o*c,"border-radius":o*c,"background-color":p?"#a22d27":"#aac789"}),i=requestAnimationFrame(b)}function c(){f.on("click",function(a){var b,c,g,h,i;b=sigma.utils.getX(a.originalEvent)-f.width()/2,c=sigma.utils.getY(a.originalEvent)-f.height()/2,g=e.cameraPosition(b,c),b=g.x,c=g.y,i=d.graph.nodes().filter(function(a){return Math.sqrt(Math.pow(a.x-b,2)+Math.pow(a.y-c,2))-a.size<o}),p||d.graph.addNode({id:h=++m+"",size:r,x:b+Math.random()/10,y:c+Math.random()/10,dX:0,dY:0,type:"goo"}),i.forEach(function(a){p?d.graph.dropNode(a.id):d.graph.addEdge({id:++n+"",source:h,target:a.id,size:2})})}),f.on("mousemove",function(a){j=sigma.utils.getX(a.originalEvent),k=sigma.utils.getY(a.originalEvent)}),f.on("DOMMouseScroll mousewheel",function(a){o*=sigma.utils.getDelta(a.originalEvent)<0?1/q:q,a.preventDefault()}),$(document).on("keydown",function(a){p=32==a.which?!0:p}),$(document).on("keyup",function(a){p=32==a.which?!1:p}),$("#close-konami").on("click",function(){window.cancelAnimationFrame(i),d.kill(),d=null,$("#konami").remove()})}var d,e,f,g,h,i,j,k,l=function(a){var b={addEvent:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event,d)},a.attachEvent("on"+b,a[b+c]))},input:"",pattern:"38384040373937396665",load:function(a){this.addEvent(document,"keydown",function(c,d){return d&&(b=d),b.input+=c?c.keyCode:event.keyCode,b.input.length>b.pattern.length&&(b.input=b.input.substr(b.input.length-b.pattern.length)),b.input==b.pattern?(b.code(a),b.input="",c.preventDefault(),!1):void 0},this)},code:function(a){window.location=a}};return"string"==typeof a&&b.load(a),"function"==typeof a&&(b.code=a,b.load()),b},m=0,n=0,o=50,p=!1,q=1.1,r=10,s=.8,t=.01,u=50,v=15,w=1;sigma.classes.graph.addMethod("computePhysics",function(){var a,b,c,d,e,f,g,h,i=this.nodesArray.length;for(a=0;i>a;a++)c=this.nodesArray[a],c.dX*=s,c.dY*=s;for(a=0;i>a;a++)for(c=this.nodesArray[a],c.dY+=w,b=a+1;i>b;b++)d=this.nodesArray[b],e=c.x-d.x,f=c.y-d.y,g=Math.sqrt(e*e+f*f),h=(2*r>g?(2*r-g)/g/2:0)-((this.allNeighborsIndex[c.id]||{})[d.id]?t*(g-u):0),d.dX-=h*e,d.dY-=h*f,c.dX+=h*e,c.dY+=h*f;for(a=0;i>a;a++)c=this.nodesArray[a],c.dX=Math.max(Math.min(c.dX,v),-v),c.dY=Math.max(Math.min(c.dY,v),-v),c.x+=c.dX,c.y+=c.dY,c.y=Math.min(-r,c.y)}),sigma.canvas.nodes.goo=function(a,b,c){var d=c("prefix")||"",e=a[d+"size"];b.fillStyle=a.color||c("defaultNodeColor"),b.beginPath(),b.arc(a[d+"x"],a[d+"y"],e,0,2*Math.PI,!0),b.closePath(),b.fill(),b.strokeStyle="#000",b.lineWidth=1,b.beginPath(),b.moveTo(a[d+"x"]-e/2,a[d+"y"]),b.lineTo(a[d+"x"]+e/2,a[d+"y"]),b.moveTo(a[d+"x"],a[d+"y"]-e/2),b.lineTo(a[d+"x"],a[d+"y"]+e/2),b.stroke()};new l(function(){if(!d){var b=!1;$('<div id="konami"><div id="konami-container"><div id="disc"></div><div id="ground"></div></div><ul class="caption"><li><strong>CLICK</strong>: Add a node, linked to nodes in the mouse area</li><li><strong>SPACEBAR + CLICK</strong>: Remove all nodes in the mouse area</li><li><strong>MOUSEWHEEL</strong>: Change the size of the mouse area</li></ul><div id="close-konami" class="fa fa-times"></div></div>').css({height:0,color:"#fff"}).prependTo($(".below-the-footer .columns")).animate({height:300},{duration:400,complete:function(){$("html, body").animate({scrollTop:$("#konami").offset().top},{complete:function(){b||(a(),b=!0)}})}})}})}();